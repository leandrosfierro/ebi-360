<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Encuestas Modulares</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @page {
            size: A4;
            margin: 2cm;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.7;
            color: #1f2937;
            background: linear-gradient(135deg, #7c3aed 0%, #764ba2 100%);
            padding: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            overflow: hidden;
        }
        
        .cover {
            background: #7c3aed;
            background: linear-gradient(135deg, #7c3aed 0%, #764ba2 100%);
            color: white;
            padding: 5rem 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .cover::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 15s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .cover-content {
            position: relative;
            z-index: 1;
        }
        
        .logo {
            width: 120px;
            height: 120px;
            margin: 0 auto 2rem;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 900;
            color: #7c3aed;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        .cover h1 {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 1rem;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            letter-spacing: -0.02em;
        }
        
        .cover .subtitle {
            font-size: 1.5rem;
            opacity: 0.95;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .cover .version {
            font-size: 1rem;
            opacity: 0.85;
            margin-top: 2rem;
            font-weight: 500;
        }
        
        .content {
            padding: 4rem 3rem;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #111827;
            margin-top: 2.5rem;
            margin-bottom: 1.25rem;
            font-weight: 700;
            line-height: 1.3;
        }
        
        h1 { 
            font-size: 2.5rem; 
            border-bottom: 4px solid #7c3aed; 
            padding-bottom: 0.75rem;
            margin-top: 3rem;
        }
        
        h2 { 
            font-size: 2rem; 
            color: #7c3aed;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        h2::before {
            content: '';
            width: 6px;
            height: 2rem;
            background: #7c3aed;
            border-radius: 3px;
        }
        
        h3 { 
            font-size: 1.5rem;
            color: #374151;
        }
        
        h4 {
            font-size: 1.25rem;
            color: #4b5563;
        }
        
        p {
            margin-bottom: 1.25rem;
            text-align: justify;
        }
        
        ul, ol {
            margin-left: 2.5rem;
            margin-bottom: 1.5rem;
        }
        
        li {
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }
        
        li.checkbox {
            list-style: none;
            margin-left: -1.5rem;
        }
        
        li.checkbox.checked {
            color: #10b981;
            font-weight: 600;
        }
        
        code {
            background: #f3f4f6;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: #be123c;
            border: 1px solid #e5e7eb;
        }
        
        pre {
            background: #1f2937;
            color: #f3f4f6;
            padding: 2rem;
            border-radius: 16px;
            overflow-x: auto;
            margin: 2rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 1px solid #374151;
        }
        
        pre code {
            background: none;
            color: inherit;
            padding: 0;
            border: none;
        }
        
        blockquote {
            border-left: 5px solid #7c3aed;
            padding: 1.5rem 2rem;
            margin: 2rem 0;
            background: #f9fafb;
            border-radius: 0 12px 12px 0;
            font-style: italic;
            color: #374151;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 2rem 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        th, td {
            padding: 1rem 1.5rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        th {
            background: linear-gradient(135deg, #7c3aed 0%, #764ba2 100%);
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
        }
        
        tr:hover {
            background: #f9fafb;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .toc {
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            padding: 2.5rem;
            border-radius: 16px;
            margin: 2rem 0;
            border: 2px solid #e5e7eb;
        }
        
        .toc h2 {
            margin-top: 0;
            color: #7c3aed;
        }
        
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        
        .toc li {
            padding: 0.5rem 0;
        }
        
        .toc a {
            color: #7c3aed;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .toc a:hover {
            transform: translateX(8px);
            color: #764ba2;
        }
        
        .info-box {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 5px solid #3b82f6;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 12px 12px 0;
        }
        
        .success-box {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-left: 5px solid #10b981;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 12px 12px 0;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 5px solid #f59e0b;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 12px 12px 0;
        }
        
        .danger-box {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-left: 5px solid #ef4444;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 12px 12px 0;
        }
        
        .footer {
            background: #f9fafb;
            padding: 3rem;
            text-align: center;
            color: #6b7280;
            font-size: 0.9rem;
            border-top: 3px solid #7c3aed;
        }
        
        .footer strong {
            color: #7c3aed;
        }
        
        .print-button {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #7c3aed;
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            border: none;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .print-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 50px rgba(0,0,0,0.4);
        }
        
        .diagram {
            background: #1f2937;
            color: #f3f4f6;
            padding: 2rem;
            border-radius: 16px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.4;
            overflow-x: auto;
            margin: 2rem 0;
            white-space: pre;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                border-radius: 0;
                max-width: 100%;
            }
            
            .print-button {
                display: none;
            }
            
            .cover {
                page-break-after: always;
            }
            
            h1, h2, h3 {
                page-break-after: avoid;
            }
            
            pre, table, .diagram {
                page-break-inside: avoid;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 0;
            }
            
            .container {
                border-radius: 0;
            }
            
            .cover {
                padding: 3rem 1.5rem;
            }
            
            .cover h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 2rem 1.5rem;
            }
            
            h1 {
                font-size: 1.75rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <button class="print-button" onclick="window.print()">ğŸ–¨ï¸ Imprimir / Guardar PDF</button>
    
    <div class="container">
        <div class="cover">
            <div class="cover-content">
                <div class="logo">ğŸ—ï¸</div>
                <h1>Sistema de Encuestas Modulares</h1>
                <p class="subtitle">DiseÃ±o TÃ©cnico Completo</p>
                <p class="version">VersiÃ³n 1.0 â€¢ December 2025</p>
            </div>
        </div>
        
        <div class="content">
            <h1>ğŸ“Š Sistema Modular de GestiÃ³n de Encuestas - EBI 360</h1>
<h2>Documento de DiseÃ±o y Arquitectura</h2>
<br>
<strong>VersiÃ³n:</strong> 1.0  
<strong>Fecha:</strong> 23 de Diciembre de 2025  
<strong>Estado:</strong> ğŸ” En RevisiÃ³n
<br>
<p>---</p>
<br>
<h2>ğŸ“‹ Tabla de Contenidos</h2>
<br>
<ol>
<li><a href="#resumen-ejecutivo">Resumen Ejecutivo</a></li>
<li><a href="#anÃ¡lisis-de-la-situaciÃ³n-actual">AnÃ¡lisis de la SituaciÃ³n Actual</a></li>
<li><a href="#objetivos-del-sistema">Objetivos del Sistema</a></li>
<li><a href="#arquitectura-propuesta">Arquitectura Propuesta</a></li>
<li><a href="#modelo-de-datos">Modelo de Datos</a></li>
<li><a href="#flujos-de-trabajo">Flujos de Trabajo</a></li>
<li><a href="#interfaces-de-usuario">Interfaces de Usuario</a></li>
<li><a href="#plan-de-implementaciÃ³n">Plan de ImplementaciÃ³n</a></li>
<li><a href="#consideraciones-tÃ©cnicas">Consideraciones TÃ©cnicas</a></li>
<li><a href="#riesgos-y-mitigaciones">Riesgos y Mitigaciones</a></li>
</ol>
<br>
<p>---</p>
<br>
<h2>ğŸ¯ Resumen Ejecutivo</h2>
<br>
<h3>Problema Actual</h3>
<ul>
<li>Las preguntas de la encuesta EBI estÃ¡n <strong>hardcodeadas</strong> en <code>src/lib/logic.ts</code></li>
<li>No existe flexibilidad para actualizar encuestas sin modificar cÃ³digo</li>
<li>No hay soporte para mÃºltiples encuestas por empresa</li>
<li>No se pueden asignar encuestas especÃ­ficas por paÃ­s/normativa</li>
</ul>
<br>
<h3>SoluciÃ³n Propuesta</h3>
<p>Sistema modular de gestiÃ³n de encuestas que permite:</p>
<ul>
<li>âœ… GestiÃ³n dinÃ¡mica de encuestas desde panel de Super Admin</li>
<li>âœ… Carga de encuestas mediante archivos Excel</li>
<li>âœ… AsignaciÃ³n de mÃºltiples encuestas por empresa</li>
<li>âœ… Encuestas base (EBI) + encuestas complementarias (normativas)</li>
<li>âœ… ConfiguraciÃ³n por paÃ­s y plan de suscripciÃ³n</li>
</ul>
<br>
<p>---</p>
<br>
<h2>ğŸ“Š AnÃ¡lisis de la SituaciÃ³n Actual</h2>
<br>
<h3>Estructura Actual</h3>
<br>
<p>``<code>typescript</p>
<p>// src/lib/logic.ts</p>
<p>export interface Question {</p>
<p>    id: number;</p>
<p>    domain: string;</p>
<p>    construct: string;</p>
<p>    type: QuestionType; // "RP" | "FO"</p>
<p>    text: string;</p>
<p>    weight: number;</p>
<p>    severity: number;</p>
<p>    personal_weight: number;</p>
<p>    org_weight: number;</p>
<p>}</p>
<br>
<p>export const questions: Question[] = [</p>
<p>    // 36 preguntas hardcodeadas</p>
<p>];</p>
</code>`<code>
<br>
<h3>Limitaciones Identificadas</h3>
<br>
<ol>
<li><strong>Rigidez</strong></li>
<ul>
<li>âŒ Cambios requieren modificar cÃ³digo</li>
<li>âŒ Deploy necesario para actualizar encuestas</li>
<li>âŒ No versionado de encuestas</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Escalabilidad</strong></li>
<ul>
<li>âŒ Una sola encuesta para todos</li>
<li>âŒ No soporta mÃºltiples idiomas</li>
<li>âŒ No permite personalizaciÃ³n por empresa</li>
</ul>
</ol>
<br>
<ol>
<li><strong>GestiÃ³n</strong></li>
<ul>
<li>âŒ Sin interfaz administrativa</li>
<li>âŒ No hay historial de cambios</li>
<li>âŒ DifÃ­cil auditorÃ­a</li>
</ul>
</ol>
<br>
<p>---</p>
<br>
<h2>ğŸ¯ Objetivos del Sistema</h2>
<br>
<h3>Objetivos Principales</h3>
<br>
<ol>
<li><strong>Flexibilidad</strong></li>
<ul>
<li>âœ… Actualizar encuestas sin modificar cÃ³digo</li>
<li>âœ… MÃºltiples encuestas activas simultÃ¡neamente</li>
<li>âœ… Versionado de encuestas</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Modularidad</strong></li>
<ul>
<li>âœ… Encuesta base (EBI) obligatoria</li>
<li>âœ… Encuestas complementarias opcionales</li>
<li>âœ… AsignaciÃ³n por empresa/paÃ­s/plan</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Usabilidad</strong></li>
<ul>
<li>âœ… Carga mediante Excel (formato familiar)</li>
<li>âœ… Interfaz intuitiva para Super Admins</li>
<li>âœ… ValidaciÃ³n automÃ¡tica de datos</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Trazabilidad</strong></li>
<ul>
<li>âœ… Historial de versiones</li>
<li>âœ… AuditorÃ­a de cambios</li>
<li>âœ… Respuestas vinculadas a versiÃ³n especÃ­fica</li>
</ul>
</ol>
<br>
<p>---</p>
<br>
<h2>ğŸ—ï¸ Arquitectura Propuesta</h2>
<br>
<h3>Componentes del Sistema</h3>
<br>
</code>`<code>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚                   SUPER ADMIN PANEL                     â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</p>
<p>â”‚  â”‚   Encuestas  â”‚  â”‚  AsignaciÃ³n  â”‚  â”‚   Reportes   â”‚ â”‚</p>
<p>â”‚  â”‚   GestiÃ³n    â”‚  â”‚   Empresas   â”‚  â”‚  AnalÃ­ticas  â”‚ â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>                          â†“</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚                    CAPA DE LÃ“GICA                       â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</p>
<p>â”‚  â”‚   Parser     â”‚  â”‚  Validador   â”‚  â”‚  Calculador  â”‚ â”‚</p>
<p>â”‚  â”‚   Excel      â”‚  â”‚   Datos      â”‚  â”‚  Puntajes    â”‚ â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>                          â†“</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚                  BASE DE DATOS (Supabase)               â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</p>
<p>â”‚  â”‚   surveys    â”‚  â”‚survey_       â”‚  â”‚  company_    â”‚ â”‚</p>
<p>â”‚  â”‚              â”‚  â”‚questions     â”‚  â”‚  surveys     â”‚ â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚</p>
<p>â”‚  â”‚   results    â”‚  â”‚  responses   â”‚                   â”‚</p>
<p>â”‚  â”‚              â”‚  â”‚              â”‚                   â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>                          â†“</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚                  COMPANY ADMIN PANEL                    â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚</p>
<p>â”‚  â”‚  Encuestas Asignadas a la Empresa                â”‚  â”‚</p>
<p>â”‚  â”‚  - EBI 360 (Base)                                â”‚  â”‚</p>
<p>â”‚  â”‚  - NOM-035 (MÃ©xico)                              â”‚  â”‚</p>
<p>â”‚  â”‚  - Ley Karin (Chile)                             â”‚  â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>                          â†“</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚                   EMPLOYEE INTERFACE                    â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚</p>
<p>â”‚  â”‚  DiagnÃ³sticos Disponibles                        â”‚  â”‚</p>
<p>â”‚  â”‚  [Realizar EBI 360]  [Realizar NOM-035]          â”‚  â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code>`<code>
<br>
<p>---</p>
<br>
<h2>ğŸ’¾ Modelo de Datos</h2>
<br>
<h3>Tablas Principales</h3>
<br>
<h4>1. </code>surveys<code> (Encuestas)</h4>
<br>
</code>`<code>sql
<p>CREATE TABLE surveys (</p>
<p>    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</p>
<br>
<p>    -- InformaciÃ³n bÃ¡sica</p>
<p>    code VARCHAR(50) UNIQUE NOT NULL,  -- 'EBI360', 'NOM035', 'LEY_KARIN'</p>
<p>    name VARCHAR(200) NOT NULL,</p>
<p>    description TEXT,</p>
<br>
<p>    -- Tipo y categorÃ­a</p>
<p>    survey_type VARCHAR(50) NOT NULL,  -- 'base', 'regulatory', 'custom'</p>
<p>    category VARCHAR(100),              -- 'wellness', 'safety', 'compliance'</p>
<br>
<p>    -- GeografÃ­a y normativa</p>
<p>    country_code VARCHAR(3),            -- 'MX', 'CL', 'AR', NULL (global)</p>
<p>    regulation_name VARCHAR(200),       -- 'NOM-035-STPS-2018'</p>
<br>
<p>    -- VersiÃ³n y estado</p>
<p>    version VARCHAR(20) NOT NULL,       -- '1.0', '1.1', '2.0'</p>
<p>    status VARCHAR(20) DEFAULT 'draft', -- 'draft', 'active', 'archived'</p>
<br>
<p>    -- ConfiguraciÃ³n</p>
<p>    is_base BOOLEAN DEFAULT false,      -- true solo para EBI360</p>
<p>    is_mandatory BOOLEAN DEFAULT false, -- obligatoria para empresas</p>
<p>    requires_approval BOOLEAN DEFAULT true,</p>
<br>
<p>    -- Algoritmo de cÃ¡lculo</p>
<p>    calculation_algorithm JSONB,        -- ConfiguraciÃ³n del algoritmo</p>
<p>    scoring_config JSONB,               -- ConfiguraciÃ³n de puntajes</p>
<br>
<p>    -- Metadatos</p>
<p>    created_by UUID REFERENCES profiles(id),</p>
<p>    created_at TIMESTAMP DEFAULT NOW(),</p>
<p>    updated_at TIMESTAMP DEFAULT NOW(),</p>
<p>    published_at TIMESTAMP,</p>
<p>    archived_at TIMESTAMP,</p>
<br>
<p>    -- Archivo original</p>
<p>    source_file_url TEXT,               -- URL del Excel original</p>
<p>    source_file_name VARCHAR(255),</p>
<br>
<p>    CONSTRAINT valid_status CHECK (status IN ('draft', 'active', 'archived')),</p>
<p>    CONSTRAINT valid_type CHECK (survey_type IN ('base', 'regulatory', 'custom'))</p>
<p>);</p>
<br>
<p>-- Ãndices</p>
<p>CREATE INDEX idx_surveys_code ON surveys(code);</p>
<p>CREATE INDEX idx_surveys_status ON surveys(status);</p>
<p>CREATE INDEX idx_surveys_country ON surveys(country_code);</p>
<p>CREATE INDEX idx_surveys_type ON surveys(survey_type);</p>
</code>`<code>
<br>
<h4>2. </code>survey_questions<code> (Preguntas de Encuestas)</h4>
<br>
</code>`<code>sql
<p>CREATE TABLE survey_questions (</p>
<p>    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</p>
<p>    survey_id UUID REFERENCES surveys(id) ON DELETE CASCADE,</p>
<br>
<p>    -- IdentificaciÃ³n</p>
<p>    question_number INTEGER NOT NULL,   -- Orden en la encuesta</p>
<p>    question_code VARCHAR(50),          -- CÃ³digo Ãºnico opcional</p>
<br>
<p>    -- Contenido</p>
<p>    domain VARCHAR(100) NOT NULL,       -- 'FÃ­sico', 'Emocional', etc.</p>
<p>    construct VARCHAR(200),             -- 'Bienestar corporal bÃ¡sico'</p>
<p>    question_text TEXT NOT NULL,</p>
<br>
<p>    -- Tipo y clasificaciÃ³n</p>
<p>    question_type VARCHAR(10) NOT NULL, -- 'RP' (Responsabilidad Personal), 'FO' (Factor Organizacional)</p>
<br>
<p>    -- Pesos y severidad</p>
<p>    weight DECIMAL(3,2) DEFAULT 1.0,</p>
<p>    severity DECIMAL(3,2) DEFAULT 1.0,</p>
<p>    personal_weight DECIMAL(3,2) DEFAULT 0,</p>
<p>    org_weight DECIMAL(3,2) DEFAULT 0,</p>
<br>
<p>    -- ConfiguraciÃ³n de respuesta</p>
<p>    response_type VARCHAR(20) DEFAULT 'scale', -- 'scale', 'multiple_choice', 'text'</p>
<p>    response_config JSONB,              -- ConfiguraciÃ³n especÃ­fica del tipo</p>
<br>
<p>    -- ValidaciÃ³n</p>
<p>    is_required BOOLEAN DEFAULT true,</p>
<p>    validation_rules JSONB,</p>
<br>
<p>    -- Orden y agrupaciÃ³n</p>
<p>    section VARCHAR(100),</p>
<p>    subsection VARCHAR(100),</p>
<p>    display_order INTEGER,</p>
<br>
<p>    -- Metadatos</p>
<p>    created_at TIMESTAMP DEFAULT NOW(),</p>
<p>    updated_at TIMESTAMP DEFAULT NOW(),</p>
<br>
<p>    CONSTRAINT valid_question_type CHECK (question_type IN ('RP', 'FO', 'MIXED')),</p>
<p>    CONSTRAINT valid_response_type CHECK (response_type IN ('scale', 'multiple_choice', 'text', 'boolean'))</p>
<p>);</p>
<br>
<p>-- Ãndices</p>
<p>CREATE INDEX idx_survey_questions_survey ON survey_questions(survey_id);</p>
<p>CREATE INDEX idx_survey_questions_domain ON survey_questions(domain);</p>
<p>CREATE INDEX idx_survey_questions_order ON survey_questions(survey_id, display_order);</p>
</code>`<code>
<br>
<h4>3. </code>company_surveys<code> (AsignaciÃ³n de Encuestas a Empresas)</h4>
<br>
</code>`<code>sql
<p>CREATE TABLE company_surveys (</p>
<p>    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</p>
<br>
<p>    -- Relaciones</p>
<p>    company_id UUID REFERENCES companies(id) ON DELETE CASCADE,</p>
<p>    survey_id UUID REFERENCES surveys(id) ON DELETE CASCADE,</p>
<br>
<p>    -- ConfiguraciÃ³n</p>
<p>    is_active BOOLEAN DEFAULT true,</p>
<p>    is_mandatory BOOLEAN DEFAULT false,  -- Obligatoria para empleados</p>
<br>
<p>    -- ProgramaciÃ³n</p>
<p>    start_date TIMESTAMP,</p>
<p>    end_date TIMESTAMP,</p>
<p>    frequency VARCHAR(20),               -- 'once', 'monthly', 'quarterly', 'yearly'</p>
<br>
<p>    -- Permisos</p>
<p>    assigned_by UUID REFERENCES profiles(id),</p>
<p>    approved_by UUID REFERENCES profiles(id),</p>
<br>
<p>    -- ConfiguraciÃ³n especÃ­fica de empresa</p>
<p>    custom_config JSONB,                 -- Personalizaciones</p>
<br>
<p>    -- Metadatos</p>
<p>    assigned_at TIMESTAMP DEFAULT NOW(),</p>
<p>    activated_at TIMESTAMP,</p>
<p>    deactivated_at TIMESTAMP,</p>
<br>
<p>    -- Constraint Ãºnico</p>
<p>    UNIQUE(company_id, survey_id)</p>
<p>);</p>
<br>
<p>-- Ãndices</p>
<p>CREATE INDEX idx_company_surveys_company ON company_surveys(company_id);</p>
<p>CREATE INDEX idx_company_surveys_active ON company_surveys(company_id, is_active);</p>
</code>`<code>
<br>
<h4>4. ModificaciÃ³n de </code>results<code> (Resultados)</h4>
<br>
</code>`<code>sql
<p>-- Agregar columna para vincular con encuesta especÃ­fica</p>
<p>ALTER TABLE results ADD COLUMN survey_id UUID REFERENCES surveys(id);</p>
<p>ALTER TABLE results ADD COLUMN survey_version VARCHAR(20);</p>
<br>
<p>-- Ãndice</p>
<p>CREATE INDEX idx_results_survey ON results(survey_id);</p>
</code>`<code>
<br>
<h4>5. </code>survey_responses<code> (Respuestas Individuales)</h4>
<br>
</code>`<code>sql
<p>CREATE TABLE survey_responses (</p>
<p>    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</p>
<br>
<p>    -- Relaciones</p>
<p>    result_id UUID REFERENCES results(id) ON DELETE CASCADE,</p>
<p>    question_id UUID REFERENCES survey_questions(id),</p>
<br>
<p>    -- Respuesta</p>
<p>    response_value DECIMAL(3,1),        -- Para escalas 1-10</p>
<p>    response_text TEXT,                 -- Para respuestas abiertas</p>
<p>    response_data JSONB,                -- Para respuestas complejas</p>
<br>
<p>    -- Metadatos</p>
<p>    answered_at TIMESTAMP DEFAULT NOW(),</p>
<p>    time_spent_seconds INTEGER,</p>
<br>
<p>    UNIQUE(result_id, question_id)</p>
<p>);</p>
<br>
<p>-- Ãndices</p>
<p>CREATE INDEX idx_survey_responses_result ON survey_responses(result_id);</p>
<p>CREATE INDEX idx_survey_responses_question ON survey_responses(question_id);</p>
</code>`<code>
<br>
<p>---</p>
<br>
<h2>ğŸ“‹ Formato de Excel para Carga de Encuestas</h2>
<br>
<h3>Estructura del Archivo Excel</h3>
<br>
<strong>Nombre de archivo:</strong> </code>[CODIGO_ENCUESTA]_v[VERSION].xlsx<code>  
<strong>Ejemplo:</strong> </code>NOM035_v1.0.xlsx<code>
<br>
<h4>Hoja 1: "Metadata" (Metadatos de la Encuesta)</h4>
<br>
<p>| Campo | Valor | DescripciÃ³n |</p>
<p>|-------|-------|-------------|</p>
<p>| CÃ³digo | NOM035 | CÃ³digo Ãºnico |</p>
<p>| Nombre | NOM-035 STPS 2018 | Nombre completo |</p>
<p>| DescripciÃ³n | Encuesta de factores de riesgo psicosocial | DescripciÃ³n |</p>
<p>| Tipo | regulatory | base / regulatory / custom |</p>
<p>| PaÃ­s | MX | CÃ³digo ISO del paÃ­s |</p>
<p>| Normativa | NOM-035-STPS-2018 | Nombre de la normativa |</p>
<p>| VersiÃ³n | 1.0 | VersiÃ³n de la encuesta |</p>
<p>| Es Base | NO | SI / NO |</p>
<p>| Es Obligatoria | SI | SI / NO |</p>
<br>
<h4>Hoja 2: "Questions" (Preguntas)</h4>
<br>
<p>| # | Dominio | Constructo | Tipo | Pregunta | Peso | Severidad | Peso_Personal | Peso_Org |</p>
<p>|---|---------|------------|------|----------|------|-----------|---------------|----------|</p>
<p>| 1 | FÃ­sico | Bienestar corporal | RP | Â¿DormÃ­s lo suficiente? | 0.6 | 0.9 | 1 | 0 |</p>
<p>| 2 | FÃ­sico | Bienestar corporal | FO | Â¿Tu jornada permite descanso? | 0.6 | 0.9 | 0 | 1 |</p>
<p>| ... | ... | ... | ... | ... | ... | ... | ... | ... |</p>
<br>
<h4>Hoja 3: "Algorithm" (Algoritmo de CÃ¡lculo)</h4>
<br>
</code>`<code>json
<p>{</p>
<p>  "scoring_method": "weighted_average",</p>
<p>  "domains": [</p>
<p>    {</p>
<p>      "name": "FÃ­sico",</p>
<p>      "weight": 1.0,</p>
<p>      "questions": [1, 2, 3, 4, 5, 6]</p>
<p>    },</p>
<p>    {</p>
<p>      "name": "Emocional",</p>
<p>      "weight": 1.0,</p>
<p>      "questions": [7, 8, 9, 10, 11, 12]</p>
<p>    }</p>
<p>  ],</p>
<p>  "thresholds": {</p>
<p>    "low": 0,</p>
<p>    "medium": 5,</p>
<p>    "high": 7,</p>
<p>    "excellent": 9</p>
<p>  }</p>
<p>}</p>
</code>`<code>
<br>
<p>---</p>
<br>
<h2>ğŸ”„ Flujos de Trabajo</h2>
<br>
<h3>Flujo 1: Crear Nueva Encuesta</h3>
<br>
</code>`<code>
<p>Super Admin</p>
<p>    â†“</p>
<p>[Panel de Encuestas] â†’ [Nueva Encuesta]</p>
<p>    â†“</p>
<p>[Subir Excel] â†’ ValidaciÃ³n AutomÃ¡tica</p>
<p>    â†“</p>
<p>    â”œâ”€ âœ… VÃ¡lido â†’ [Vista Previa]</p>
<p>    â”‚                    â†“</p>
<p>    â”‚              [Confirmar] â†’ Guardar en BD</p>
<p>    â”‚                    â†“</p>
<p>    â”‚              Estado: DRAFT</p>
<p>    â”‚</p>
<p>    â””â”€ âŒ InvÃ¡lido â†’ [Mostrar Errores]</p>
<p>                          â†“</p>
<p>                    [Corregir y Reintentar]</p>
</code>`<code>
<br>
<h3>Flujo 2: Publicar Encuesta</h3>
<br>
</code>`<code>
<p>Super Admin</p>
<p>    â†“</p>
<p>[Encuestas] â†’ [Seleccionar Encuesta DRAFT]</p>
<p>    â†“</p>
<p>[Revisar ConfiguraciÃ³n]</p>
<p>    â†“</p>
<p>[Publicar]</p>
<p>    â†“</p>
<p>Estado: ACTIVE</p>
<p>    â†“</p>
<p>Disponible para AsignaciÃ³n</p>
</code>`<code>
<br>
<h3>Flujo 3: Asignar Encuesta a Empresa</h3>
<br>
</code>`<code>
<p>Super Admin</p>
<p>    â†“</p>
<p>[Empresas] â†’ [Seleccionar Empresa]</p>
<p>    â†“</p>
<p>[Gestionar Encuestas]</p>
<p>    â†“</p>
<p>[Ver Encuestas Disponibles]</p>
<p>    â†“</p>
<p>    â”œâ”€ Encuestas Base (siempre asignadas)</p>
<p>    â”‚   â””â”€ EBI 360 âœ“</p>
<p>    â”‚</p>
<p>    â””â”€ Encuestas Complementarias</p>
<p>        â”œâ”€ Por PaÃ­s</p>
<p>        â”‚   â”œâ”€ NOM-035 (MÃ©xico) â–¡</p>
<p>        â”‚   â”œâ”€ Ley Karin (Chile) â–¡</p>
<p>        â”‚   â””â”€ Res 1016 (Colombia) â–¡</p>
<p>        â”‚</p>
<p>        â””â”€ Personalizadas</p>
<p>            â””â”€ [Lista de encuestas custom] â–¡</p>
<p>    â†“</p>
<p>[Seleccionar Encuestas] â†’ [Configurar]</p>
<p>    â†“</p>
<p>    â”œâ”€ Obligatoria: SI/NO</p>
<p>    â”œâ”€ Fecha Inicio</p>
<p>    â”œâ”€ Fecha Fin</p>
<p>    â””â”€ Frecuencia</p>
<p>    â†“</p>
<p>[Asignar]</p>
<p>    â†“</p>
<p>Encuestas Activas para la Empresa</p>
</code>`<code>
<br>
<h3>Flujo 4: Empleado Realiza DiagnÃ³stico</h3>
<br>
</code>`<code>
<p>Empleado</p>
<p>    â†“</p>
<p>[Dashboard] â†’ [DiagnÃ³sticos Disponibles]</p>
<p>    â†“</p>
<p>    â”œâ”€ EBI 360 (Base) [Realizar]</p>
<p>    â”œâ”€ NOM-035 [Realizar]</p>
<p>    â””â”€ Ley Karin [Realizar]</p>
<p>    â†“</p>
<p>[Seleccionar Encuesta]</p>
<p>    â†“</p>
<p>[Cargar Preguntas de BD]</p>
<p>    â†“</p>
<p>[Responder Cuestionario]</p>
<p>    â†“</p>
<p>[Calcular Puntaje segÃºn Algoritmo]</p>
<p>    â†“</p>
<p>[Guardar Resultado]</p>
<p>    â†“</p>
<p>[Mostrar Resultados]</p>
</code>`<code>
<br>
<p>---</p>
<br>
<h2>ğŸ¨ Interfaces de Usuario</h2>
<br>
<h3>1. Panel de Super Admin - GestiÃ³n de Encuestas</h3>
<br>
</code>`<code>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  Encuestas                                                  â”‚</p>
<p>â”‚  Gestiona las encuestas disponibles en la plataforma       â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  [+ Nueva Encuesta]  [Importar desde Excel]  [Exportar]   â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  Filtros: [Todas â–¼] [PaÃ­s: Todos â–¼] [Estado: Activas â–¼]  â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚ CÃ“DIGO    â”‚ NOMBRE           â”‚ TIPO        â”‚ PAÃS â”‚ ESTADO â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚ ğŸ  EBI360 â”‚ EBI 360 Base    â”‚ Base        â”‚ --   â”‚ âœ… Activaâ”‚</p>
<p>â”‚           â”‚ v2.0             â”‚             â”‚      â”‚ 1,247 usosâ”‚</p>
<p>â”‚           â”‚ [Editar] [Ver] [Versiones]                      â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚ ğŸ‡²ğŸ‡½ NOM035â”‚ NOM-035 STPS    â”‚ Regulatoria â”‚ MX   â”‚ âœ… Activaâ”‚</p>
<p>â”‚           â”‚ v1.0             â”‚             â”‚      â”‚ 89 usos  â”‚</p>
<p>â”‚           â”‚ [Editar] [Ver] [Asignar]                        â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚ ğŸ‡¨ğŸ‡± KARIN â”‚ Ley Karin       â”‚ Regulatoria â”‚ CL   â”‚ ğŸ“ Draft â”‚</p>
<p>â”‚           â”‚ v1.0             â”‚             â”‚      â”‚ 0 usos   â”‚</p>
<p>â”‚           â”‚ [Editar] [Publicar] [Eliminar]                  â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code>`<code>
<br>
<h3>2. Formulario de Nueva Encuesta</h3>
<br>
</code>`<code>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  Nueva Encuesta                                             â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  MÃ©todo de CreaciÃ³n:                                        â”‚</p>
<p>â”‚  â—‹ Subir archivo Excel                                      â”‚</p>
<p>â”‚  â—‹ Crear manualmente                                        â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</p>
<p>â”‚  â”‚  ğŸ“ Arrastra tu archivo Excel aquÃ­                â”‚     â”‚</p>
<p>â”‚  â”‚     o haz clic para seleccionar                   â”‚     â”‚</p>
<p>â”‚  â”‚                                                    â”‚     â”‚</p>
<p>â”‚  â”‚  Formato aceptado: .xlsx, .xls                    â”‚     â”‚</p>
<p>â”‚  â”‚  TamaÃ±o mÃ¡ximo: 5MB                               â”‚     â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  ğŸ“¥ Descargar plantilla de ejemplo                          â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  [Cancelar]  [Subir y Validar]                             â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code>`<code>
<br>
<h3>3. Vista Previa de Encuesta Importada</h3>
<br>
</code>`<code>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  Vista Previa: NOM-035 STPS 2018                           â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  âœ… Archivo validado correctamente                          â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  InformaciÃ³n General:                                       â”‚</p>
<p>â”‚  â€¢ CÃ³digo: NOM035                                           â”‚</p>
<p>â”‚  â€¢ Nombre: NOM-035 STPS 2018                               â”‚</p>
<p>â”‚  â€¢ Tipo: Regulatoria                                        â”‚</p>
<p>â”‚  â€¢ PaÃ­s: MÃ©xico (MX)                                        â”‚</p>
<p>â”‚  â€¢ VersiÃ³n: 1.0                                             â”‚</p>
<p>â”‚  â€¢ Total de preguntas: 72                                   â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  Dominios detectados:                                       â”‚</p>
<p>â”‚  â€¢ Condiciones del ambiente de trabajo (12 preguntas)      â”‚</p>
<p>â”‚  â€¢ Carga de trabajo (15 preguntas)                         â”‚</p>
<p>â”‚  â€¢ Falta de control (10 preguntas)                         â”‚</p>
<p>â”‚  â€¢ Jornada de trabajo (8 preguntas)                        â”‚</p>
<p>â”‚  â€¢ Interferencia trabajo-familia (6 preguntas)             â”‚</p>
<p>â”‚  â€¢ Liderazgo (12 preguntas)                                â”‚</p>
<p>â”‚  â€¢ Relaciones en el trabajo (9 preguntas)                  â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  [Ver Preguntas Completas]  [Editar Metadatos]             â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  [Cancelar]  [Guardar como Borrador]  [Publicar]          â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code>`<code>
<br>
<h3>4. AsignaciÃ³n de Encuestas a Empresa</h3>
<br>
</code>`<code>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  Encuestas Asignadas: Acme Corporation                     â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  Encuesta Base (Obligatoria)                               â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</p>
<p>â”‚  â”‚ âœ… EBI 360 v2.0                                   â”‚     â”‚</p>
<p>â”‚  â”‚    Estado: Activa                                 â”‚     â”‚</p>
<p>â”‚  â”‚    Empleados completados: 45/120 (37%)           â”‚     â”‚</p>
<p>â”‚  â”‚    [Ver Resultados]                               â”‚     â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  Encuestas Complementarias                                 â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</p>
<p>â”‚  â”‚ âœ… NOM-035 STPS 2018 v1.0                        â”‚     â”‚</p>
<p>â”‚  â”‚    PaÃ­s: MÃ©xico                                   â”‚     â”‚</p>
<p>â”‚  â”‚    Obligatoria: SÃ­                                â”‚     â”‚</p>
<p>â”‚  â”‚    Empleados completados: 38/120 (32%)           â”‚     â”‚</p>
<p>â”‚  â”‚    [Configurar] [Desactivar]                      â”‚     â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  [+ Asignar Nueva Encuesta]                                â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  Encuestas Disponibles:                                    â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</p>
<p>â”‚  â”‚ â–¡ Ley Karin (Chile)                               â”‚     â”‚</p>
<p>â”‚  â”‚ â–¡ ResoluciÃ³n 1016 (Colombia)                      â”‚     â”‚</p>
<p>â”‚  â”‚ â–¡ Encuesta de Clima Laboral Custom                â”‚     â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  [Asignar Seleccionadas]                                   â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code>`<code>
<br>
<h3>5. Vista de Empleado - DiagnÃ³sticos Disponibles</h3>
<br>
</code>`<code>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  Mis DiagnÃ³sticos                                           â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  DiagnÃ³sticos Pendientes                                   â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</p>
<p>â”‚  â”‚ ğŸ  EBI 360 - EvaluaciÃ³n de Bienestar Integral    â”‚     â”‚</p>
<p>â”‚  â”‚    Tiempo estimado: 10-15 minutos                â”‚     â”‚</p>
<p>â”‚  â”‚    Ãšltima realizaciÃ³n: 15 Nov 2025               â”‚     â”‚</p>
<p>â”‚  â”‚    [Realizar DiagnÃ³stico â†’]                       â”‚     â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</p>
<p>â”‚  â”‚ ğŸ‡²ğŸ‡½ NOM-035 - Factores de Riesgo Psicosocial    â”‚     â”‚</p>
<p>â”‚  â”‚    Tiempo estimado: 20-25 minutos                â”‚     â”‚</p>
<p>â”‚  â”‚    âš ï¸ Obligatorio - Vence: 31 Dic 2025           â”‚     â”‚</p>
<p>â”‚  â”‚    [Realizar DiagnÃ³stico â†’]                       â”‚     â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  DiagnÃ³sticos Completados                                  â”‚</p>
<p>â”‚                                                             â”‚</p>
<p>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</p>
<p>â”‚  â”‚ âœ… EBI 360 - Completado el 15 Nov 2025           â”‚     â”‚</p>
<p>â”‚  â”‚    PuntuaciÃ³n: 7.8/10                             â”‚     â”‚</p>
<p>â”‚  â”‚    [Ver Resultados]                               â”‚     â”‚</p>
<p>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code>`<code>
<br>
<p>---</p>
<br>
<h2>ğŸ“… Plan de ImplementaciÃ³n por Etapas</h2>
<br>
<h3>Fase 1: Fundamentos (Semana 1-2) ğŸ”µ</h3>
<br>
<strong>Objetivo:</strong> Crear la base de datos y migraciÃ³n de datos actuales
<br>
<strong>Tareas:</strong>
<ol>
<li>âœ… Crear migraciones SQL para nuevas tablas</li>
<li>âœ… Migrar encuesta EBI actual a BD</li>
<li>âœ… Crear funciones de utilidad para queries</li>
<li>âœ… Tests de integridad de datos</li>
</ol>
<br>
<strong>Entregables:</strong>
<ul>
<li>Esquema de BD completo</li>
<li>Encuesta EBI en BD</li>
<li>DocumentaciÃ³n de tablas</li>
</ul>
<br>
<strong>Criterios de AceptaciÃ³n:</strong>
<li class="checkbox">â˜ Todas las tablas creadas sin errores
<li class="checkbox">â˜ Encuesta EBI migrada con 36 preguntas
<li class="checkbox">â˜ Queries bÃ¡sicos funcionando
<li class="checkbox">â˜ Tests pasando
<br>
<p>---</p>
<br>
<h3>Fase 2: Parser de Excel (Semana 3) ğŸŸ¢</h3>
<br>
<strong>Objetivo:</strong> Implementar carga de encuestas desde Excel
<br>
<strong>Tareas:</strong>
<ol>
<li>âœ… Crear librerÃ­a de parsing de Excel</li>
<li>âœ… Validador de formato</li>
<li>âœ… Transformador de datos</li>
<li>âœ… Manejo de errores</li>
</ol>
<br>
<strong>Entregables:</strong>
<ul>
<li>FunciÃ³n </code>parseExcelSurvey(file)<code></li>
<li>Validaciones completas</li>
<li>Mensajes de error descriptivos</li>
</ul>
<br>
<strong>Criterios de AceptaciÃ³n:</strong>
<li class="checkbox">â˜ Parser lee correctamente Excel
<li class="checkbox">â˜ Validaciones detectan errores
<li class="checkbox">â˜ Datos transformados correctamente
<li class="checkbox">â˜ Manejo de errores robusto
<br>
<p>---</p>
<br>
<h3>Fase 3: Panel de Super Admin - Encuestas (Semana 4-5) ğŸŸ¡</h3>
<br>
<strong>Objetivo:</strong> Interfaz de gestiÃ³n de encuestas
<br>
<strong>Tareas:</strong>
<ol>
<li>âœ… PÃ¡gina de listado de encuestas</li>
<li>âœ… Formulario de carga de Excel</li>
<li>âœ… Vista previa de encuesta</li>
<li>âœ… PublicaciÃ³n/Archivado</li>
<li>âœ… Versionado</li>
</ol>
<br>
<strong>Entregables:</strong>
<ul>
<li></code>/admin/super/surveys<code> completo</li>
<li>CRUD de encuestas</li>
<li>Upload de archivos</li>
</ul>
<br>
<strong>Criterios de AceptaciÃ³n:</strong>
<li class="checkbox">â˜ Super admin puede subir Excel
<li class="checkbox">â˜ Vista previa muestra datos correctos
<li class="checkbox">â˜ Puede publicar/archivar encuestas
<li class="checkbox">â˜ Versionado funciona
<br>
<p>---</p>
<br>
<h3>Fase 4: AsignaciÃ³n a Empresas (Semana 6) ğŸŸ </h3>
<br>
<strong>Objetivo:</strong> Vincular encuestas con empresas
<br>
<strong>Tareas:</strong>
<ol>
<li>âœ… Interfaz de asignaciÃ³n</li>
<li>âœ… ConfiguraciÃ³n de encuestas por empresa</li>
<li>âœ… Validaciones de compatibilidad</li>
<li>âœ… ActivaciÃ³n/DesactivaciÃ³n</li>
</ol>
<br>
<strong>Entregables:</strong>
<ul>
<li>MÃ³dulo de asignaciÃ³n</li>
<li>ConfiguraciÃ³n por empresa</li>
<li>Validaciones</li>
</ul>
<br>
<strong>Criterios de AceptaciÃ³n:</strong>
<li class="checkbox">â˜ Super admin puede asignar encuestas
<li class="checkbox">â˜ ConfiguraciÃ³n se guarda correctamente
<li class="checkbox">â˜ Validaciones previenen conflictos
<li class="checkbox">â˜ Estado se actualiza en tiempo real
<br>
<p>---</p>
<br>
<h3>Fase 5: AdaptaciÃ³n del DiagnÃ³stico (Semana 7-8) ğŸ”´</h3>
<br>
<strong>Objetivo:</strong> Modificar flujo de diagnÃ³stico para usar BD
<br>
<strong>Tareas:</strong>
<ol>
<li>âœ… Refactorizar </code>/diagnostico<code> para cargar de BD</li>
<li>âœ… Selector de encuesta disponible</li>
<li>âœ… CÃ¡lculo dinÃ¡mico de puntajes</li>
<li>âœ… Guardar respuestas vinculadas</li>
</ol>
<br>
<strong>Entregables:</strong>
<ul>
<li>DiagnÃ³stico dinÃ¡mico</li>
<li>Selector de encuestas</li>
<li>CÃ¡lculo de algoritmos</li>
</ul>
<br>
<strong>Criterios de AceptaciÃ³n:</strong>
<li class="checkbox">â˜ Empleado ve encuestas asignadas
<li class="checkbox">â˜ Puede completar cualquier encuesta
<li class="checkbox">â˜ Puntajes se calculan correctamente
<li class="checkbox">â˜ Respuestas se guardan con versiÃ³n
<br>
<p>---</p>
<br>
<h3>Fase 6: Resultados y Reportes (Semana 9) ğŸŸ£</h3>
<br>
<strong>Objetivo:</strong> VisualizaciÃ³n de resultados multi-encuesta
<br>
<strong>Tareas:</strong>
<ol>
<li>âœ… Dashboard con mÃºltiples encuestas</li>
<li>âœ… ComparaciÃ³n de resultados</li>
<li>âœ… ExportaciÃ³n por encuesta</li>
<li>âœ… AnalÃ­ticas agregadas</li>
</ol>
<br>
<strong>Entregables:</strong>
<ul>
<li>Dashboard multi-encuesta</li>
<li>Reportes por encuesta</li>
<li>Comparativas</li>
</ul>
<br>
<strong>Criterios de AceptaciÃ³n:</strong>
<li class="checkbox">â˜ Resultados se muestran por encuesta
<li class="checkbox">â˜ ComparaciÃ³n funciona
<li class="checkbox">â˜ ExportaciÃ³n incluye todas las encuestas
<li class="checkbox">â˜ AnalÃ­ticas correctas
<br>
<p>---</p>
<br>
<h3>Fase 7: Testing y OptimizaciÃ³n (Semana 10) âš«</h3>
<br>
<strong>Objetivo:</strong> Asegurar calidad y performance
<br>
<strong>Tareas:</strong>
<ol>
<li>âœ… Tests end-to-end</li>
<li>âœ… OptimizaciÃ³n de queries</li>
<li>âœ… ValidaciÃ³n de UX</li>
<li>âœ… DocumentaciÃ³n</li>
</ol>
<br>
<strong>Entregables:</strong>
<ul>
<li>Suite de tests completa</li>
<li>Performance optimizado</li>
<li>DocumentaciÃ³n de usuario</li>
</ul>
<br>
<strong>Criterios de AceptaciÃ³n:</strong>
<li class="checkbox">â˜ Todos los tests pasan
<li class="checkbox">â˜ Performance < 2s carga
<li class="checkbox">â˜ UX validada
<li class="checkbox">â˜ DocumentaciÃ³n completa
<br>
<p>---</p>
<br>
<h2>ğŸ”§ Consideraciones TÃ©cnicas</h2>
<br>
<h3>TecnologÃ­as Requeridas</h3>
<br>
</code>`<code>typescript
<p>// Nuevas dependencias</p>
<p>{</p>
<p>  "xlsx": "^0.18.5",           // Parsing de Excel</p>
<p>  "zod": "^3.22.4",            // ValidaciÃ³n de esquemas</p>
<p>  "react-dropzone": "^14.2.3", // Upload de archivos</p>
<p>  "recharts": "^2.10.3"        // GrÃ¡ficos avanzados</p>
<p>}</p>
</code>`<code>
<br>
<h3>Estructura de Archivos</h3>
<br>
</code>`<code>
<p>src/</p>
<p>â”œâ”€â”€ app/</p>
<p>â”‚   â””â”€â”€ admin/</p>
<p>â”‚       â””â”€â”€ super/</p>
<p>â”‚           â””â”€â”€ surveys/                    # NUEVO</p>
<p>â”‚               â”œâ”€â”€ page.tsx                # Listado</p>
<p>â”‚               â”œâ”€â”€ new/</p>
<p>â”‚               â”‚   â””â”€â”€ page.tsx            # Nueva encuesta</p>
<p>â”‚               â”œâ”€â”€ [id]/</p>
<p>â”‚               â”‚   â”œâ”€â”€ page.tsx            # Ver/Editar</p>
<p>â”‚               â”‚   â”œâ”€â”€ preview/</p>
<p>â”‚               â”‚   â”‚   â””â”€â”€ page.tsx        # Vista previa</p>
<p>â”‚               â”‚   â””â”€â”€ assign/</p>
<p>â”‚               â”‚       â””â”€â”€ page.tsx        # Asignar a empresas</p>
<p>â”‚               â””â”€â”€ components/</p>
<p>â”‚                   â”œâ”€â”€ SurveyList.tsx</p>
<p>â”‚                   â”œâ”€â”€ SurveyUploader.tsx</p>
<p>â”‚                   â”œâ”€â”€ SurveyPreview.tsx</p>
<p>â”‚                   â””â”€â”€ SurveyAssignment.tsx</p>
<p>â”‚</p>
<p>â”œâ”€â”€ lib/</p>
<p>â”‚   â”œâ”€â”€ surveys/                            # NUEVO</p>
<p>â”‚   â”‚   â”œâ”€â”€ parser.ts                       # Parser de Excel</p>
<p>â”‚   â”‚   â”œâ”€â”€ validator.ts                    # Validaciones</p>
<p>â”‚   â”‚   â”œâ”€â”€ calculator.ts                   # CÃ¡lculo de puntajes</p>
<p>â”‚   â”‚   â””â”€â”€ types.ts                        # Tipos TypeScript</p>
<p>â”‚   â””â”€â”€ logic.ts                            # DEPRECAR gradualmente</p>
<p>â”‚</p>
<p>â””â”€â”€ components/</p>
<p>    â””â”€â”€ surveys/                            # NUEVO</p>
<p>        â”œâ”€â”€ SurveySelector.tsx              # Selector de encuestas</p>
<p>        â”œâ”€â”€ QuestionRenderer.tsx            # Renderizado dinÃ¡mico</p>
<p>        â””â”€â”€ ResultsComparison.tsx           # ComparaciÃ³n</p>
</code>`<code>
<br>
<h3>APIs y Endpoints</h3>
<br>
</code>`<code>typescript
<p>// src/app/api/surveys/route.ts</p>
<p>GET    /api/surveys              // Listar encuestas</p>
<p>POST   /api/surveys              // Crear encuesta</p>
<p>GET    /api/surveys/[id]         // Obtener encuesta</p>
<p>PUT    /api/surveys/[id]         // Actualizar encuesta</p>
<p>DELETE /api/surveys/[id]         // Eliminar encuesta</p>
<br>
<p>// src/app/api/surveys/upload/route.ts</p>
<p>POST   /api/surveys/upload       // Subir y parsear Excel</p>
<br>
<p>// src/app/api/surveys/[id]/publish/route.ts</p>
<p>POST   /api/surveys/[id]/publish // Publicar encuesta</p>
<br>
<p>// src/app/api/companies/[id]/surveys/route.ts</p>
<p>GET    /api/companies/[id]/surveys        // Encuestas de empresa</p>
<p>POST   /api/companies/[id]/surveys        // Asignar encuesta</p>
<p>DELETE /api/companies/[id]/surveys/[sid]  // Desasignar encuesta</p>
</code>`<code>
<br>
<p>---</p>
<br>
<h2>âš ï¸ Riesgos y Mitigaciones</h2>
<br>
<h3>Riesgo 1: MigraciÃ³n de Datos Existentes</h3>
<br>
<strong>Problema:</strong> Resultados actuales no estÃ¡n vinculados a encuesta especÃ­fica
<br>
<strong>MitigaciÃ³n:</strong>
</code>`<code>sql
<p>-- Script de migraciÃ³n</p>
<p>UPDATE results </p>
<p>SET survey_id = (SELECT id FROM surveys WHERE code = 'EBI360'),</p>
<p>    survey_version = '2.0'</p>
<p>WHERE survey_id IS NULL;</p>
</code>`<code>
<br>
<h3>Riesgo 2: Performance con MÃºltiples Encuestas</h3>
<br>
<strong>Problema:</strong> Queries lentos con muchas preguntas
<br>
<strong>MitigaciÃ³n:</strong>
<ul>
<li>Ãndices optimizados</li>
<li>CachÃ© de encuestas activas</li>
<li>PaginaciÃ³n de resultados</li>
<li>Lazy loading de preguntas</li>
</ul>
<br>
<h3>Riesgo 3: ValidaciÃ³n de Algoritmos Complejos</h3>
<br>
<strong>Problema:</strong> Algoritmos de cÃ¡lculo pueden ser complejos
<br>
<strong>MitigaciÃ³n:</strong>
<ul>
<li>Validador de algoritmos</li>
<li>Tests exhaustivos</li>
<li>DocumentaciÃ³n clara</li>
<li>Ejemplos de referencia</li>
</ul>
<br>
<h3>Riesgo 4: Compatibilidad con CÃ³digo Existente</h3>
<br>
<strong>Problema:</strong> CÃ³digo actual usa </code>questions` hardcodeado
<br>
<strong>MitigaciÃ³n:</strong>
<ul>
<li>MigraciÃ³n gradual</li>
<li>Mantener compatibilidad temporal</li>
<li>Feature flags</li>
<li>Tests de regresiÃ³n</li>
</ul>
<br>
<p>---</p>
<br>
<h2>ğŸ“Š MÃ©tricas de Ã‰xito</h2>
<br>
<h3>KPIs del Sistema</h3>
<br>
<ol>
<li><strong>Funcionalidad</strong></li>
<ul>
<li>âœ… 100% de encuestas migrables desde Excel</li>
<li>âœ… 0 errores en cÃ¡lculo de puntajes</li>
<li>âœ… < 5 segundos para cargar encuesta</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Usabilidad</strong></li>
<ul>
<li>âœ… Super admin puede crear encuesta en < 5 minutos</li>
<li>âœ… 0 errores de validaciÃ³n falsos positivos</li>
<li>âœ… Interfaz intuitiva (< 2 clics para acciÃ³n)</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Escalabilidad</strong></li>
<ul>
<li>âœ… Soporta > 100 encuestas simultÃ¡neas</li>
<li>âœ… < 2 segundos para cargar listado</li>
<li>âœ… Maneja archivos Excel de hasta 5MB</li>
</ul>
</ol>
<br>
<p>---</p>
<br>
<h2>ğŸ¯ PrÃ³ximos Pasos</h2>
<br>
<h3>Para RevisiÃ³n y AprobaciÃ³n</h3>
<br>
<ol>
<li><strong>Revisar Modelo de Datos</strong></li>
<ul>
<li>Â¿Las tablas cubren todos los casos de uso?</li>
<li>Â¿Falta algÃºn campo importante?</li>
<li>Â¿Los tipos de datos son correctos?</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Validar Flujos de Trabajo</strong></li>
<ul>
<li>Â¿Los flujos son lÃ³gicos?</li>
<li>Â¿Falta algÃºn paso crÃ­tico?</li>
<li>Â¿Hay casos edge no cubiertos?</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Aprobar Interfaces</strong></li>
<ul>
<li>Â¿El diseÃ±o es intuitivo?</li>
<li>Â¿Falta alguna funcionalidad?</li>
<li>Â¿La navegaciÃ³n es clara?</li>
</ul>
</ol>
<br>
<ol>
<li><strong>Confirmar Plan de ImplementaciÃ³n</strong></li>
<ul>
<li>Â¿Las fases son realistas?</li>
<li>Â¿El orden es correcto?</li>
<li>Â¿Los tiempos son adecuados?</li>
</ul>
</ol>
<br>
<h3>Decisiones Pendientes</h3>
<br>
<li class="checkbox">â˜ Â¿Permitir ediciÃ³n de encuestas publicadas?
<li class="checkbox">â˜ Â¿Versionado automÃ¡tico o manual?
<li class="checkbox">â˜ Â¿LÃ­mite de encuestas por empresa?
<li class="checkbox">â˜ Â¿Soporte para mÃºltiples idiomas desde el inicio?
<li class="checkbox">â˜ Â¿Importar/Exportar configuraciones entre ambientes?
<br>
<p>---</p>
<br>
<h2>ğŸ“ Notas Finales</h2>
<br>
<p>Este documento es un <strong>punto de partida</strong> para la discusiÃ³n. EstÃ¡ diseÃ±ado para ser:</p>
<br>
<ul>
<li>âœ… <strong>Completo:</strong> Cubre todos los aspectos del sistema</li>
<li>âœ… <strong>Flexible:</strong> Puede adaptarse segÃºn feedback</li>
<li>âœ… <strong>PrÃ¡ctico:</strong> Enfocado en implementaciÃ³n real</li>
<li>âœ… <strong>Escalable:</strong> Preparado para crecimiento futuro</li>
</ul>
<br>
<strong>Siguiente paso:</strong> Revisar este documento secciÃ³n por secciÃ³n y aprobar/ajustar cada componente antes de comenzar la implementaciÃ³n.
<br>
<p>---</p>
<br>
<strong>Autor:</strong> Antigravity AI + Equipo EBI 360  
<strong>VersiÃ³n:</strong> 1.0 - Borrador para RevisiÃ³n  
<strong>Fecha:</strong> 23 de Diciembre de 2025
<br>
        </div>
        
        <div class="footer">
            <p><strong>Â© 2025 EBI 360</strong> - Todos los derechos reservados</p>
            <p>Documento generado el 23 de December de 2025</p>
        </div>
    </div>
    
    <script>
        window.addEventListener('beforeprint', () => {
            document.title = 'Sistema de Encuestas Modulares';
        });
    </script>
</body>
</html>